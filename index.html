<!DOCTYPE html>

<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-16BE">
	</head>
<body>
	<title>Am I safe from Otters?</title>
	
<button onclick="getLocation()">Am I safe from Otters??</button>
<p id="demo"></p>
<script>
var apikey = "**YOURAPIKEYHERE*"
var x = document.getElementById("demo");

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else { 
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}
function showPosition(position) {
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      myFunction(this);
    }
  };
var latlon = position.coords.latitude + "," + position.coords.longitude;
var apicall ="http://open.mapquestapi.com/geocoding/v1/reverse?key="+apikey+"&location="+latlon+"&outFormat=xml";
  xmlhttp.open("GET", apicall, true);
  xmlhttp.send();
}

function myFunction(xml) {
  var x, i, xmlDoc, txt;
  xmlDoc = xml.responseXML;
  txt = "";
  state = xmlDoc.getElementsByTagName("adminArea3");
  for (i = 0; i< state.length; i++) {
    txt += state[i].childNodes[0].nodeValue + "<br>";
  }
  document.getElementById("demo").innerHTML = txt;
}

</script>



</body></html>
